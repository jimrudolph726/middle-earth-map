<!DOCTYPE html>
<html lang="en">
<head>
    <title>Middle-earth Map</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="plugins/leaflet-sidebar.css" />
    <link rel="stylesheet" href="style.css"> 
    <link rel="icon" href="assets/favicon.ico" type="image/x-icon">
</head>

<body>
    <div id="sidebar" class="sidebar collapsed">
        <!-- Nav tabs -->
        <div class="sidebar-tabs">
            <ul role="tablist">
                <li><a href="#paths" role="tab"><i class="material-icons">hiking</i> Campsites and Paths</a></li>
                <li><a href="#settlements" role="tab"><i class="material-icons">fort</i> Settlements</a></li>
                <li><a href="#geography" role="tab"><i class="material-icons">terrain</i> Geography</a></li>
                <li><a href="#battles" role="tab">
                    <span class="material-symbols-outlined">swords</span> Battles
                </a></li>
                <li><a href="#items" role="tab">
                    <span class="material-symbols-outlined">diamond</span> Important Items
                </a></li>

                <li><a href="#mapSectionPane" role="tab"><i class="material-icons">map</i> Maps</a></li>
            </ul>
            <ul role="tablist">
                <li><a href="#settings" role="tab"><i class="fa fa-gear"></i></a></li>
            </ul>
        </div>

        <!-- Tab panes -->
        <div class="sidebar-content">
            <div class="sidebar-pane" id="paths">
                <h1 class="sidebar-header">
                    Paths
                    <span class="sidebar-close"><i class="fa fa-caret-left"></i></span>
                </h1>
                <div id="pathsSection">
                    <h2>Campsites</h2>
                    <label for="samfrodocampsitesCheckbox">
                      <input type="checkbox" id="samfrodocampsitesCheckbox" /> Fellowship/Sam and Frodo Campsites
                    </label>
                    <label for="aragorncampsitesCheckbox">
                        <input type="checkbox" id="aragorncampsitesCheckbox" /> Aragorn, Gimli, Legolas Campsites
                    </label>
                    <label for="pippincampsitesCheckbox">
                        <input type="checkbox" id="pippincampsitesCheckbox" /> Pippin Campsites
                    </label>
                    <label for="merrycampsitesCheckbox">
                        <input type="checkbox" id="merrycampsitesCheckbox" /> Merry Campsites
                    </label>
                    <label for="gandalfthegreycampsitesCheckbox">
                        <input type="checkbox" id="gandalfthegreycampsitesCheckbox" /> Gandalf the Grey Campsites
                    </label>
                    <h2>Paths</h2>
                    <label for="samfrodopathCheckbox">
                      <input type="checkbox" id="samfrodopathCheckbox" /> Fellowship/Sam and Frodo
                    </label>
                    <label for="aragornpathCheckbox">
                      <input type="checkbox" id="aragornpathCheckbox" /> Aragorn, Gimli, and Legolas
                    </label>
                    <label for="pippinpathCheckbox">
                        <input type="checkbox" id="pippinpathCheckbox" /> Pippin
                    </label>
                    <label for="merrypathCheckbox">
                        <input type="checkbox" id="merrypathCheckbox" /> Merry
                    </label>
                    <label for="gandalfthegrey_mergedCheckbox">
                        <input type="checkbox" id="gandalfthegrey_mergedCheckbox" /> Gandalf the Grey
                    </label>
                </div>
            </div>

            <div class="sidebar-pane" id="settlements">
                <h1 class="sidebar-header">
                    Settlements
                    <span class="sidebar-close"><i class="fa fa-caret-left"></i></span>
                </h1>
                <div id="settlementsSection">
                    <label for="hobbitsCheckbox">
                      <input type="checkbox" id="hobbitsCheckbox" /> Hobbits
                    </label>
                    <label for="menCheckbox">
                      <input type="checkbox" id="menCheckbox" /> Men
                    </label>
                    <label for="elvesCheckbox">
                      <input type="checkbox" id="elvesCheckbox" /> Elves
                    </label>
                </div>
            </div>

            <div class="sidebar-pane" id="geography">
                <h1 class="sidebar-header">
                    Geography
                    <span class="sidebar-close"><i class="fa fa-caret-left"></i></span>
                </h1>
                <div id="geographySection">
                    <label for="mountain_rangesCheckbox">
                        <input type="checkbox" id="mountain_rangesCheckbox" /> Mountain Ranges
                    </label>
                    <label for="mountainsCheckbox">
                        <input type="checkbox" id="mountainsCheckbox" /> Mountains
                    </label>
                    <label for="hillsCheckbox">
                        <input type="checkbox" id="hillsCheckbox" /> Hills
                    </label>
                    <label for="forestsCheckbox">
                        <input type="checkbox" id="forestsCheckbox" /> Forests
                    </label>
                    <label for="riversCheckbox">
                        <input type="checkbox" id="riversCheckbox" /> Rivers
                    </label>
                    <label for="lakes_seasCheckbox">
                        <input type="checkbox" id="lakes_seasCheckbox" /> Lakes and Seas
                    </label>
                    <label for="wetlandsCheckbox">
                        <input type="checkbox" id="wetlandsCheckbox" /> Wetlands
                    </label>
                </div>
            </div>
            
            <div class="sidebar-pane" id="battles">
                <h1 class="sidebar-header">
                    Battles
                    <span class="sidebar-close"><i class="fa fa-caret-left"></i></span>
                </h1>
                <div id="battlesSection">
                    <label for="battlesCheckbox">
                        <input type="checkbox" id="battlesCheckbox" /> Battles
                    </label>
                    <label for="oneononeCheckbox">
                        <input type="checkbox" id="oneononeCheckbox" /> One-on-One Duels
                    </label>
                </div>
            </div>

            <div class="sidebar-pane" id="items">
                <h1 class="sidebar-header">
                    Important Items
                    <span class="sidebar-close"><i class="fa fa-caret-left"></i></span>
                </h1>
                <div id="itemsSection">
                    <label for="allCheckbox">
                        <input type="checkbox" id="allCheckbox" /> All
                    </label>
                    <label for="swordsCheckbox">
                        <input type="checkbox" class="itemCheckbox" id="swordsCheckbox" /> Swords
                    </label>
                    <label for="ringsCheckbox">
                        <input type="checkbox" class="itemCheckbox" id="ringsCheckbox" /> Rings
                    </label>
                    <label for="booksCheckbox">
                        <input type="checkbox" class="itemCheckbox" id="booksCheckbox" /> Books
                    </label>
                </div>
            </div>

            <div class="sidebar-pane" id="mapSectionPane">
                <h1 class="sidebar-header">
                    Maps
                    <span class="sidebar-close"><i class="fa fa-caret-left"></i></span>
                </h1>
                <div id="mapSection">
                    <label>
                        <button onclick="window.location.href='beleriand/beleriand.html'">View Map of Beleriand</button>
                    </label>
                    <label>
                        <button onclick="window.location.href='numenor/numenor.html'">View Map of Numenor</button>
                    </label>
                </div>
            </div>
            

            <div class="sidebar-pane" id="settings">
                <h1 class="sidebar-header">Settings<span class="sidebar-close"><i class="fa fa-caret-left"></i></span></h1>
            </div>
        </div>
    </div>
    <div id="map" class="sidebar-map"></div>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://unpkg.com/leaflet-clicktolerance/src/index.js"></script>
    <script src="plugins/leaflet-sidebar.js"></script>
    <script type="module" src="plugins/leaflet-arrowheads.js"></script>
    <script type="module" src="plugins/leaflet.geometryutil.js"></script>
    <script type="module" src="script.js"></script>
    <script type="module" src="variables.js"></script>

    <script>
        document.getElementById("allCheckbox").addEventListener("change", function () {
            let itemCheckboxes = document.querySelectorAll("#itemsSection .itemCheckbox");
            
            itemCheckboxes.forEach(checkbox => {
                checkbox.checked = this.checked;
                checkbox.dispatchEvent(new Event("change"));  // Trigger change event for MarkerListeners
            });
        });
        
        // If any individual checkbox is unchecked, also uncheck "All"
        document.querySelectorAll("#itemsSection .itemCheckbox").forEach(checkbox => {
            checkbox.addEventListener("change", function () {
                let allChecked = document.querySelectorAll("#itemsSection .itemCheckbox:checked").length === document.querySelectorAll("#itemsSection .itemCheckbox").length;
                document.getElementById("allCheckbox").checked = allChecked;
            });
        });
    </script>
</body>
</html>
